# 常见解决方案面试题

## 1. 负载均衡相关

> 负载均衡，英文名称为Load Balance，其含义就是指将负载（工作任务）进行平衡、分摊到多个操作单元上进行运行，例如FTP服务器、Web服务器、企业核心应用服务器和其它主要任务服务器等，从而协同完成工作任务。

关于负载均衡可参考：[什么是负载均衡原理？](https://www.zhihu.com/question/61783920)

### 1.1 如何控制负载均衡？

对于如何控制负载均衡，并目前没有找到特别适合的答案。不过可以从**负载均衡算法**、**负载均衡实现方式**的思路来进行解答。

#### 负载均衡算法

**1、轮询访问**

**按请求顺序轮流分配到后端服务器**，即挨个数数，轮流分配。

优点：实现简单，绝对均衡

缺点：无法保证分配的合理性，即无法根据服务器的承受能力来分配任务。

**2、随机访问**

**随机选择一台服务器来分配任务**。请求增多（分散性）达到了均衡。

优点：没有状态，不需要维持上次的选择状态和均衡因子

缺点：请求达到一定程度，具备轮询访问的缺点

**3、源地址哈希法（IP-Hash）**

**根据客户端IP地址，通过hash函数计算一个hashcode，用hashcode对服务器列表进行取模运算，从而得到客户端要访问的序号**。

优点：同一个IP的客户端访问的是同一个服务器。

**4、轮询加权**

**按照请求顺序和权重两个条件进行任务分配**。给配置高、负载低的机器更加高的权重，而且有序。

**5、随机加权**

**按照权重随机分配服务器**。并非有序。与轮询加权相比，两者不同的是，轮询加权请求分配数比例相等，而随机加权是一个近似值。

**6、最小连接法**

**根据后端服务器当前连接情况，动态选取当前连接数最少的一台服务器来处理请求**。

缺点：当服务器性能差距较大时，无法达到预期效果，**连接数小而自身性能差**的服务器可能不及**连接数大而性能好的服务器**。



关于负载均衡算法和Nginx的负载均衡算法参看：[负载均衡的6种算法，Ngnix的5种算法！](https://zhuanlan.zhihu.com/p/68733507)

关于负载均衡算法的实现参考：[一篇有趣的负载均衡算法实现](https://zhuanlan.zhihu.com/p/144974957) （以上6中算法的Java实现）

关于负载均衡的实现方式参看：[全网最详细的负载均衡原理图解](https://zhuanlan.zhihu.com/p/346907076) （软硬件负载均衡的实现原理）



